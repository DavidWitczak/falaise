<div class="container-fluid bg-blue pt-4 pb-3 mb-3">
  <div class="container">
    <img title="{{ content.field_theme_collection.0 }}" class="w-100"
         src="/{{ directory }}/images/collection_{{ node.field_theme_collection.target_id }}.jpg">
  </div>
</div>

<div class="container">
  <h1 class="text-center mt-5 mb-4"><img class="mr-2" width="55"
                                         src="/{{ directory }}/images/object.png">{{ node.title.value }}</h1>

  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-6">{{ bamboo_render_field('field_legende_1', 'node') }}</div>
      <div class="col-lg-6">{{ bamboo_render_field('field_legende_2', 'node') }}</div>
    </div>
    <hr/>
    <div class="row mb-3">
      <div class="col-lg-6">{{ bamboo_render_field('field_legende_3', 'node') }}</div>
      <div class="col-lg-6">{{ bamboo_render_field('field_legende_4', 'node') }}</div>
    </div>

    <div class="row">
      <div class="col-lg-12 p-0 media-full" id="media-full">
        {% set media = getMediaInfos(node.field_medias.target_id, 'full_max') %}
        {% if media.bundle == 'video' %}
          <div class="embed-responsive embed-responsive-16by9">
            <iframe class="embed-responsive-item" src="{{ media.url }}" allowfullscreen></iframe>
          </div>
        {% else %}
          <a href="{{ media.url_full }}" data-fancybox="gallery" data-caption="{{ media.name }} - {{ media.copy }}">
            <img class="w-100 mx-1" title="{{ media.name }} - {{ media.copy }}" alt="{{ media.alt }}" width="95%"
                 src="{{ media.url }}">
            <img class="d-block fancy-icon" width="55" src="/{{ directory }}/images/fancy.png">
          </a>
        {% endif %}
      </div>
    </div>
  </div>
  <div class="container-fluid mx-0 mt-2 mb-5 p-0">
    <div class="carousel-slick">
      {% for images in node.field_medias|batch(4) %}
        {% for image in images %}
          <div class="diapo_slick text-align-center">
            {% set media = getMediaInfos(image.target_id, 'carre_crop') %}
            {% if media.bundle == 'video' %}
              <a href="{{ media.url }}" data-fancybox="gallery">
                <img class="thumb_diapo mx-1"
                     title="{{ media.name }}"
                     width="95%"
                     src="{{ media.thumb }}">
              </a>
            {% else %}
              <a href="{{ media.url_full }}" data-fancybox="gallery" data-caption="{{ media.name }} - {{ media.copy }}">
                <img class="thumb_diapo mx-1"
                     title="{{ media.name }} - {{ media.copy }}"
                     alt="{{ media.alt }}"
                     width="95%"
                     src="{{ media.url }}">
              </a>
            {% endif %}
          </div>
        {% endfor %}
      {% endfor %}
    </div>
  </div>

  <div class="chapo">{{ bamboo_render_field('field_chapo', 'node') }}</div>

  <div class="my-5">
    {{ bamboo_render_field('field_description', 'node') }}
  </div>

  <div class="my-5">
    {{ bamboo_render_entity('media', node.field_podcast.target_id) }}
  </div>

  {% if node.field_liens|length > 0 or node.field_fichiers|length > 0 %}
    <div class="bg-blue p-4 my-5">
      <h4 class="text-uppercase p-0">En savoir +</h4>
      <div class="txt-white">
        {{ bamboo_render_field('field_liens', 'node') }}
        {{ bamboo_render_field('field_fichiers', 'node') }}
      </div>
    </div>
  {% endif %}
</div>

<div id="timeline" name="timeline">
  {{ bamboo_render_block('timeline_block') }}
</div>

{% if node.field_objets_lies|length > 0 %}
  <div class="container-fluid bg-blue p-4 my-5">
    <div class="container">
      <h4 class="text-uppercase p-0 mb-4">Collections associ√©es</h4>
      <div class="row justify-content-around">
        {% for nodes in node.field_objets_lies %}
          {% set node = bamboo_load_entity('node', nodes.target_id) %}
          {% set media = getMediaInfos(node.field_medias.target_id, 'carre_crop') %}
          {% set url = path('entity.node.canonical', {'node': node.id}) %}

          <div class="col-lg-4 mb-4 px-5 gray-hover">
            <a href="{{ url }}">
              {% if media.bundle == 'video' %}
                <img class="w-100" title="{{ media.name }}" src="{{ media.thumb }}">
              {% else %}
                <img class="w-100" title="{{ media.name }} - {{ media.copy }}" alt="{{ media.alt }}"
                     src="{{ media.url }}">
              {% endif %}
              <h5 class="text-center txt-white">{{ node.title.value }}</h5>
            </a>
          </div>
        {% endfor %}
        <div class="text-center mt-4">
          <a href="/collections">
            <img width="350" src="/{{ directory }}/images/all_collec.png">
          </a>
        </div>
      </div>
    </div>
  </div>
{% endif %}
